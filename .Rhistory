vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels="transparent",
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
# basic treemap
treemap(genderRace,
vSize=n,
type=c(Race, Gender)
)
# basic treemap
treemap(genderRace,
vSize=n,
index=c(Race, Gender),
type="index"
)
genderRace <- policesViolence %>%
group_by(Race, Gender) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
vSize=n,
index=c(Race, Gender),
type="index"
)
# basic treemap
treemap(genderRace,
vSize=n,
index=c("Race", "Gender"),
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race", "Gender"),
vSize=n,
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race", "Gender"),
vSize=n,
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize=n,
type="index"
)
# basic treemap
treemap(genderRace,
index=c(genderRace$Race,genderRace$Gender),
vSize=n,
type="index"
)
genderRace <- policesViolence %>%
group_by(Race, Gender) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize=n,
type="index"
)
genderRace <- policesViolence %>%
group_by(Race, Gender) %>%
summarise(n=n()) %>%
arrange(-n)
colnames(genderRace) <- c("Race","Gender")
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize=n,
type="index"
)
genderRace <- policesViolence %>%
group_by(Gender, Race) %>%
summarise(n=n()) %>%
arrange(-n)
colnames(genderRace) <- c("Gender", "Race")
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize=n,
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index"
)
genderRace <- policesViolence %>%
group_by(Race, Gender) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
bg.labels=c("transparent")
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1)
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F,
border.col=c("black","white"),
border.lwds=c(7,2)
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=T
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F,
bg.labels=c("transparent")
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="value",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F,
bg.labels=c("transparent")
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="categorical",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F,
bg.labels=c("transparent")
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="categorical",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(15,12),
fontcolor.labels=c("white","orange"),
fontface.labels=c(2,1),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
overlap.labels=0.5,
inflate.labels=F,
bg.labels=0
)
genderRace <- policesViolence %>%
group_by(Gender, Race) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Gender","Race"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
source("/Volumes/Archive/uni/DataScience/policesViolence/analisys.R", echo=TRUE)
# basic treemap
treemap(genderRace,
index=c("Gender","Race"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
genderRace <- policesViolence %>%
group_by(Gender, Race) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Gender","Race"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
# basic treemap
treemap(genderRace,
index=c("Gender","Race"),
vSize="n",
type="index"
)
install.packages("treemap")
install.packages("treemap")
library(treemap)
genderRace <- policesViolence %>%
group_by(Gender, Race) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Gender","Race"),
vSize="n",
type="index"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
setwd("/Volumes/Archive/uni/DataScience/policesViolence")
library(dplyr)
library(ggplot2)
library(waffle)
library(plotly)
library(usmap)
library(calendR)
library(treemap)
library(networkD3)
policesViolence <- read.csv("fatalEncountersDotOrg.csv")
policesViolence <- as_tibble(policesViolence)
policesViolence$Age[which(policesViolence$Age == "")]="NA"
policesViolence$Age[which(policesViolence$Age < 1)]="NA" #eg. (0.25 non è un'età)
policesViolence$Age=as.numeric(policesViolence$Age) #per togliere i range d'età (eg. 18-25 lo assumo come NA)
policesViolence$Gender[which(policesViolence$Gender=="")]="NA"
policesViolence$Race[which(policesViolence$Race=="")]="Race unspecified"
policesViolence$Race[which(policesViolence$Race=="Christopher Anthony Alexander")]="Race unspecified"
policesViolence$Race[which(policesViolence$Race=="European-American/European-American/White")]="European-American/White"
policesViolence$Race[which(policesViolence$Race=="european-American/White")]="European-American/White"
policesViolence$Race[which(policesViolence$Race=="African-American/Black African-American/Black Not imputed")]="African-American/Black"
policesViolence$Location.of.death..city.[which(policesViolence$Location.of.death..city.=="")]="NA"
policesViolence$Foreknowledge.of.mental.illness..INTERNAL.USE..NOT.FOR.ANALYSIS[which(policesViolence$Foreknowledge.of.mental.illness..INTERNAL.USE..NOT.FOR.ANALYSIS=="")]="NA"
policesViolence$date<-format(as.Date(policesViolence$Date.of.injury.resulting.in.death..month.day.year., '%m/%d/%Y'), "%Y/%m/%d")
policesViolence <- policesViolence %>%
filter(format(as.Date(date, "%Y/%m/%d"),"%Y")<2022)
############################################
############################################
ageAndGender <- policesViolence %>%
group_by(Age, Gender) %>%
summarise (n = n()) %>%
arrange (n)
ggplot(ageAndGender, aes(x = Age, y = n, fill = Gender)) +
geom_bar(stat = "identity")+
scale_fill_manual(values = c("#cf91ea", "#226696", "red", "green"))+
theme_minimal()+
theme(
legend.text = element_text(size=11)
)+
geom_vline(aes(xintercept = mean(as.numeric(Age))), color="red")+
ggtitle("Età & Genere","Vittime raggruppate per età e sesso")
sumGender <- ageAndGender %>%
group_by(Gender) %>%
summarise ( totali = sum(n)) %>%
arrange(-totali)
sumGender<-sumGender %>%
mutate(percentuale=round(totali/sum(sumGender$totali)*100, digits=2))
ggplot(sumGender, aes(x="", y=totali, fill=paste(Gender, "-",percentuale,"%"))) +
geom_bar(stat="identity", width = 1)+
coord_polar("y", start=0)+
labs(x=NULL, y=NULL, fill="Gender")+
theme_classic()+
theme(axis.line = element_blank(),
axis.text = element_blank(),
legend.text = element_text(size=11),
axis.ticks = element_blank())+
guides(fill = guide_legend(title = "Genere"))+
scale_fill_manual(values=c("#cf91ea","#226696","red","green"))+
ggtitle("Per genere","Totale delle vittime suddivise per sesso")
genderRace <- policesViolence %>%
group_by(Gender, Race) %>%
summarise(n=n()) %>%
arrange(-n)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set1"
)
# basic treemap
treemap(genderRace,
index=c("Race","Gender"),
vSize="n",
type="index",
fontsize.labels=c(17,13),
fontcolor.labels=c("white","black"),
fontface.labels=c(2,3),
bg.labels=c("transparent"),
align.labels=list(
c("center", "center"),
c("right", "bottom")
),
border.col=c("black","white"),
border.lwds=c(0,1),
title = "Per sesso ed etnia",
palette="Set2"
)
